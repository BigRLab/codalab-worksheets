{% extends 'base.html' %}
{% load staticfiles %}
{% load codalab_tags %}
{% load tz %}

{% block page_title %}Dataset {% if "update" not in request.path %}Create{% else %}Update{% endif %}{% endblock page_title %}
{% block head_title %}Dataset {% if "update" not in request.path %}Create{% else %}Update{% endif %}{% endblock %}

{% block extra_head %}

{% endblock %}

{% block content %}
<div class="row">
    <div class="large-12 columns">
        <style>
            .error {
                color: red;
            }


        </style>
        <form action="#" method="POST" enctype="multipart/form-data">
            {% csrf_token %}

            <fieldset>
                <legend>{% if "update" not in request.path %}Create{% else %}Update{% endif %} Dataset</legend>

                {% for field in form %}
                    {% if field.name == "data_file" %}
                    <br><br>Please select your dataset style, single or many:<br><br>
                        <span id="single_dataset_button" class="button">Single new dataset</span>
                        <span id="multiple_dataset_button" class="button">Many existing datasets bundled into one new dataset</span>
                    {% endif %}

                    <div class="fieldWrapper {% if field.name == "data_file" or field.name == "sub_data_files" %}hide{% endif %}" id="{{field.name}}-field-container">
                        <div class="row">
                            <div class="large-3 columns {% if field.errors %}error{% endif %}">
                                <label for="{{field.id_for_label}}" class="inline">{{field.label}}{{form.label_suffix}}</label>
                                {{ field.errors }}
                            </div>
                            <div class="large-9 columns">
                                {{ field }}
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </fieldset>

            <input type="submit" value="{% if "update" in request.path %}Save changes{% else %}Upload{% endif %}" class="button">
        </form>
    </div>
</div>
{% endblock %}

{% block js %}
$(function () {
    $("#single_dataset_button").click(function() {
        $("#data_file-field-container").removeClass("hide");
        $("#sub_data_files-field-container").addClass("hide");
    });

    $("#multiple_dataset_button").click(function() {
        $("#data_file-field-container").addClass("hide");
        $("#sub_data_files-field-container").removeClass("hide");
    });
});
{% endblock js %}
